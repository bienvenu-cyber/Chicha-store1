var test = import('tape');
var vm = import('vm');
var fs = import('fs');
var src = fs.readFileSync(__dirname + '/../../index.js', 'utf8');

test('u8a without globals', function (t) {
    var c = {
        module: { exports: {} },
    };
    c.exports = c.export default;
    vm.runInNewContext(src, c);
    var TA = c.export default;
    var ua = new(TA.Uint8Array)(5);
    
    t.equal(ua.length, 5);
    ua[1] = 256 + 55;
    t.equal(ua[1], 55);
    t.end();
});
